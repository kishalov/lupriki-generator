// src/app/storyGenerator.ts

function pick<T>(arr: T[]): T {
	return arr[Math.floor(Math.random() * arr.length)];
}

export function generateLyupisStory(character: string): string {
	// персонажи
	const heroes = ["Люпи", "Пупо", "Питриц", "Корешок", "Карлос", "Изюм", "Молпар"];

	// если выбран "Все" — берём случайного героя
	const hero = character === "Все" ? pick(heroes) : character;

	// --- ЗАВЯЗКИ ---

const heroProblems = [
	"кончилась жвачка",
	"закончилась настойка",
	"сломался чайник",
	"кончились дрова",
	"порвалась карта леса",
	"разбилась кружка",
	"промок плащ",
	"сдуло крышу с хижины",
	"потерялась ложка",
	"сдуло шляпу ветром",
	"исчез ключ от кладовой",
	"замёрзла дверь",
	"разбежались светлячки",
	"закончился сахар",
	"упал фонарь",
	"исчез аромат у чая",
	"сгорела свеча",
	"потрескались сапоги",
	"порвался гамак",
	"сбежала табуретка",
	"спрятался котёл",
	"улетела тетрадь с записями",
	"потерялся компас",
	"уползли ягоды",
	"сломался мостик через ручей",
	"погасла лампа в окне",
	"засорилась трубка самовара",
	"отвалился крюк у сумки",
	"сбежали пуговицы",
	"перепутались травы в банках",
	"упал полк с банками",
	"затопило пол в хижине",
	"пропала музыка из радиоприёмника",
	"остыл костёр",
	"сорвался крючок на рыбалке",
	"проснулся слишком рано",
	"проспал рассвет",
	"растаял лёд в погребе",
	"потерялся рецепт зелья",
	"спрятался будильник",
	"разрядился фонарь",
	"закончились чернила",
	"разлился чай",
	"улетел воздушный шар",
	"засохли цветы у окна",
	"забыл, где оставил ведро",
	"разбился термометр",
	"забился фильтр в колодце",
	"упал флаг с башни",
	"рассыпался песок из часов",
	"исчезло отражение в зеркале",
	"перепутались дни недели",
	"растаял снеговик на веранде",
	"испортился компот",
	"запуталась верёвка",
	"разбросаны вещи по дому",
	"закончилась бумага для писем",
	"сломалась лестница на чердак",
	"потух огонь в печи",
	"появился странный запах из шкафа",
	"потерялся камень памяти",
	"переломилась палка для ходьбы",
	"растаяло мыло",
	"пропал голос у граммофона",
	"спрятались ножницы",
	"поблекли рисунки на стене",
	"порвалась сеть для ловли светлячков",
	"сдуло крышку с чайника",
	"затянуло небо облаками",
	"растрепались записи в дневнике",
	"превратилась соль в песок",
	"закончился мёд",
	"замерла стрелка компаса",
	"исчез тень от дерева",
	"застряла пробка в бутылке",
	"погас светильник у двери",
	"сломалось кресло у окна",
	"сбежала корица из банки",
	"перепутались ключи",
	"застряла рука в банке с вареньем",
	"потерялась обувь",
	"спрятался зонтик",
	"сбежала подушка с кровати",
	"закончились свечи",
	"покосился стол",
	"выросла трава на крыше",
	"начал капать потолок",
	"заглох колодец",
	"расплавился снег на холме",
	"пропали следы на тропинке",
	"забыл пароль от сундука",
	"разбился стеклянный шар",
	"уползли карандаши со стола",
	"заглох флейтовый цветок",
	"растаяло мороженое",
	"упала полка с книгами",
	"убежала ложка с вареньем",
	"рассыпался сахар",
	"закончился хлеб",
	"затерялся носок под кроватью",
];

const heroActionsForProblem = [
	"пошёл за фруктами",
	"пошёл к Питрицу за советом",
	"решил сходить на рынок",
	"отправился в лес на поиски",
	"решил всё записать в блокнот",
	"открыл сундук с запасами",
	"пошёл собирать ягоды",
	"вышел на крыльцо проверить небо",
	"отправился в соседнюю долину",
	"решил спросить у Корешок",
	"поднялся на чердак искать фонарь",
	"пошёл чинить крышу",
	"развёл костёр перед домом",
	"решил сделать настойку наугад",
	"вышел к ручью за водой",
	"отправился проверить старый мостик",
	"пошёл смотреть, не проснулся ли Карлос",
	"пошёл к Изюму за инструментами",
	"решил поискать подсказку в дневнике",
	"отправился к озеру",
	"вышел во двор развесить бельё",
	"вышел встречать рассвет",
	"решил сварить чай и подумать",
	"пошёл проверять кладовую",
	"отправился в болото за мхом",
	"решил вызвать духов ветра",
	"пошёл к Пупо за кружкой",
	"решил разложить вещи по местам",
	"вышел поздороваться с солнцем",
	"решил пересчитать запасы",
	"отправился слушать птиц",
	"пошёл смотреть на звёзды",
	"вышел прогуляться по поляне",
	"решил нарисовать карту местности",
	"отправился искать потерянную пуговицу",
	"решил почистить печь",
	"пошёл кормить светлячков",
	"вышел встречать дождь",
	"отправился чинить забор",
	"пошёл искать вдохновение",
	"решил спеть песню для хижины",
	"вышел подышать свежим воздухом",
	"отправился проверять свои зелья",
	"решил написать письмо друзьям",
	"пошёл проверить колодец",
	"решил поискать старую книгу",
	"вышел встретить вечерний туман",
	"решил обновить настойку из трав",
	"пошёл искать пропавшую ложку",
	"отправился к обрыву смотреть на облака",
	"решил пересадить цветы",
	"вышел на улицу поздороваться с ветром",
	"пошёл собирать свет из росы",
	"решил проверить ловушки для снов",
	"отправился искать грибную поляну",
	"пошёл к старому дубу за советом",
	"решил построить новый мостик",
	"отправился чинить часы",
	"вышел в сад проверить деревья",
	"решил записать новую песню",
	"пошёл чинить ступку для трав",
	"отправился в Питучий лес",
	"решил собрать травы у подножья холма",
	"пошёл искать потерянный камень памяти",
	"вышел проверить гнездо светляков",
	"решил проверить свою шляпу на удачу",
	"отправился за мёдом к пчёлам",
	"пошёл вычистить пруд от листьев",
	"решил навестить облачный город",
	"вышел смотреть радугу после дождя",
	"отправился искать свой плащ",
	"пошёл проверить мост после шторма",
	"решил проверить флейтовый цветок",
	"вышел встретить рассвет с Корешок",
	"отправился ловить отражения в воде",
	"пошёл собрать немного мха для подушки",
	"решил вытереть пыль с полок",
	"вышел проверить улей у дерева",
	"отправился слушать голоса ветра",
	"пошёл собирать листья для настойки",
	"решил поискать вдохновение на холме",
	"вышел посмотреть на звёзды с Карлосом",
	"отправился к озеру за отражением",
	"пошёл за чернилами к Изюму",
	"решил проверить старый сундук",
	"вышел смотреть, как горит костёр",
	"отправился за углём для печи",
	"пошёл проведать своих соседей",
	"решил проверить, спит ли лес",
	"отправился смотреть, не растёт ли мост",
	"пошёл слушать треск огня",
	"решил навестить пещеру с эхом",
	"вышел встречать вечернюю прохладу",
	"отправился чинить фонарь у двери",
	"пошёл поливать цветы у крыльца",
	"решил сходить за солью к рынку",
	"отправился в туман за новостями",
	"пошёл проверять запасы ягод",
	"решил поискать свои старые записи",
	"вышел искать пропавший светильник",
];

const heroDesires = [
	"испечь пирог",
	"сварить новый вид чая",
	"сделать настойку для друзей",
	"украсить хижину огоньками",
	"устроить ночной пикник",
	"построить маленький причал у ручья",
	"нарисовать карту звёзд",
	"посадить дерево перед домом",
	"построить гнездо для светлячков",
	"написать песню про дождь",
	"приготовить обед для соседей",
	"поймать утренний туман в банку",
	"вылепить фигурку из глины",
	"починить старую мельницу",
	"выучить язык облаков",
	"сшить новое одеяло",
	"приготовить варенье из звёздных ягод",
	"прочитать всю библиотеку Пупо",
	"сделать настенные часы из веток",
	"построить теплицу для трав",
	"собрать коллекцию звуков ветра",
	"сварить суп из солнечных лучей",
	"придумать рецепт идеального чая",
	"сплести корзину из мха",
	"выгладить небо перед рассветом",
	"создать настойку против забывчивости",
	"построить мост через облака",
	"поймать падающую звезду",
	"собрать росу для вечернего обряда",
	"сварить сладкий сироп из листьев",
	"собрать коллекцию камней с лицами",
	"сделать скворечник для ветра",
	"нарисовать портрет Пупо",
	"посадить сад летающих растений",
	"построить башню для наблюдения за закатами",
	"сшить мешочек для снов",
	"создать фонарь, который поёт",
	"приготовить ужин на весь лес",
	"построить новую печь",
	"сплести венок для Корешок",
	"собрать редкие грибы",
	"найти заброшенный маяк",
	"поймать солнечный луч и посадить его в банку",
	"сделать карту всех ручьёв",
	"приготовить чай для Карлоса",
	"вылепить из мха новый стол",
	"зажечь костёр у старого дуба",
	"создать музыкальный ящик",
	"научиться играть на флейтовом цветке",
	"записать звуки ночного леса",
	"построить домик для путешественников",
	"поймать радугу и развесить её над хижиной",
	"сделать мягкое кресло из травы",
	"выпечь хлеб с ароматом грозы",
	"собрать коллекцию перьев",
	"построить плот из коры деревьев",
	"создать сад из камней",
	"собрать настойку от тоски",
	"выгладить скатерть из облаков",
	"написать письмо Стражу Нуля",
	"сделать зеркало, показывающее воспоминания",
	"собрать коллекцию утренних теней",
	"построить телескоп из бутылок",
	"нарисовать карту туманов",
	"сварить компот из лунных ягод",
	"вырастить дерево, дающее чай",
	"собрать коллекцию запахов дождя",
	"создать хрустальный колокол",
	"сделать фонтан из росы",
	"изобрести часы, которые не спешат",
	"поймать песню ветра",
	"сварить мед из солнечного света",
	"сделать ловушку для снов",
	"построить музыкальный забор",
	"приготовить настой из мха и грёз",
	"собрать коллекцию отпечатков лап зверей",
	"сделать домик для капель дождя",
	"сплести верёвку из радуги",
	"выдолбить чашу из камня",
	"нарисовать пейзаж без горизонта",
	"построить теплицу для снежных растений",
	"приготовить варенье из облаков",
	"собрать коллекцию улыбок друзей",
	"построить лодку из света",
	"сшить плащ из тумана",
	"научиться говорить с горами",
	"создать коллекцию ароматов утра",
	"сварить кофе из лунной пыли",
	"сделать подушку из звёзд",
	"приготовить суп из ливня и соли",
	"сплести сеть для ловли отражений",
	"собрать коллекцию старых песен",
	"создать настой, возвращающий вдохновение",
	"сделать лестницу в облака",
	"посадить сад из отражений",
	"изобрести чайник, который сам себя наливает",
	"написать книгу о странных снах",
	"создать новый музыкальный инструмент",
	"приготовить угощение для всей деревни",
	"сварить зелье доброты",
	"построить маяк для летающих китов",
];

const heroActionsForDesire = [
	"пошёл за дровами",
	"пошёл собирать ягоды",
	"отправился искать редкие травы",
	"решил позвать Пупо помочь",
	"пошёл в Питучий лес за вдохновением",
	"решил спросить совета у Карлоса",
	"отправился на рынок за мукой",
	"пошёл собирать мох у болота",
	"решил поискать подходящий камень",
	"отправился за корицей к Питрицу",
	"пошёл искать идеальное место у реки",
	"вышел на поляну за цветами",
	"решил проверить кладовую",
	"пошёл за свежими листьями мяты",
	"отправился искать солнечные ягоды",
	"пошёл к дубу за тенью",
	"решил послушать ветер у холма",
	"пошёл к источнику у бездны Ху",
	"отправился на вершину посмотреть звёзды",
	"пошёл проверить улей с пчёлами",
	"решил пригласить Корешок на помощь",
	"отправился собирать грибы",
	"пошёл за мёдом для настойки",
	"вышел во двор сушить травы",
	"пошёл к ручью мыть посуду",
	"отправился в долину за вдохновением",
	"пошёл навестить Изюма",
	"решил поискать нужный рецепт в дневнике",
	"отправился в облачный город",
	"пошёл проверять погоду у моста",
	"решил развесить фонари у хижины",
	"отправился в пещеру за эхом",
	"пошёл слушать вечерние звуки леса",
	"решил проверить запасы муки",
	"пошёл за новой кружкой",
	"отправился в заросли за корнями",
	"решил собрать немного светлячков",
	"пошёл встречать рассвет на поляне",
	"отправился смотреть на водопад",
	"решил поискать вдохновение у озера",
	"пошёл за свежей водой",
	"отправился ловить отражения в пруду",
	"решил проверить старую мельницу",
	"пошёл навещать своих друзей",
	"отправился чинить старую печь",
	"решил поискать травы для зелья",
	"пошёл собирать ветки для костра",
	"отправился искать камни с узорами",
	"решил нарисовать план работ",
	"пошёл за маслом к Питрицу",
	"отправился искать перья для украшений",
	"пошёл проверять рыбацкие снасти",
	"решил приготовить чай на костре",
	"отправился собирать лепестки цветов",
	"пошёл искать ягоды на холме",
	"решил сходить за солью в деревню",
	"пошёл к мосту смотреть на закат",
	"отправился искать нужную книгу у Пупо",
	"пошёл чинить забор у дома",
	"отправился на поиски вдохновения в тумане",
	"решил сделать фото для архива Карлоса",
	"пошёл слушать капли дождя у крыльца",
	"отправился искать грибы с Изюмом",
	"решил собрать коллекцию листьев",
	"пошёл проверять старый колодец",
	"отправился на болото за мхом",
	"решил поискать редкие кристаллы",
	"пошёл за краской для стен",
	"отправился искать потерянный узор",
	"решил пригласить всех на чай",
	"пошёл к озеру за отражением",
	"отправился смотреть, как растут цветы",
	"пошёл собирать дождевую воду",
	"отправился чинить лестницу в амбаре",
	"решил поискать лопнувший пузырь с глазами",
	"пошёл за древесиной к лесу",
	"отправился за глиной к берегу",
	"решил проверить старые записи в блокноте",
	"пошёл к дубу поговорить о жизни",
	"отправился в туманную долину",
	"решил разжечь печь для уюта",
	"пошёл чинить оконную раму",
	"отправился искать вкусный мёд",
	"пошёл рисовать пейзаж у горы",
	"решил собрать все обрывки бумаги",
	"пошёл за свежим молоком к соседям",
	"отправился искать светляков в сумерках",
	"решил приготовить чай из редких трав",
	"пошёл чинить мост через ручей",
	"отправился к поляне, где растёт счастье",
	"решил поискать вдохновение в грозе",
	"пошёл слушать шум ветра в листьях",
	"отправился за новой свечой",
	"пошёл собрать немного песка у ручья",
	"отправился искать пропавшее ведро",
	"решил проверить банку с вареньем",
	"пошёл смотреть, не проснулся ли лес",
	"отправился искать путь к облакам",
	"решил проверить, не поёт ли чайник",
	"пошёл встречать вечер с друзьями",
	"отправился проверять звёзды над домом",
];

	// два типа завязки
	const introType = Math.random() < 0.5 ? 1 : 2;

	let intro: string;

	if (introType === 1) {
		const problem = pick(heroProblems);
		const action = pick(heroActionsForProblem);
		intro = `У персонажа ${hero} проблема: ${problem}, поэтому он ${action}.`;
	} else {
		const desire = pick(heroDesires);
		const action = pick(heroActionsForDesire);
		intro = `Персонаж ${hero} хочет ${desire}, поэтому он ${action}.`;
	}

	// --- ОСНОВНЫЕ ДЕЙСТВИЯ ---

const locations = [
	"Питучий лес",
	"Питучие холмы",
	"бездна Ху",
	"облачный город",
	"скалы Забвения",
	"Аморантикум",
	"Мистикорп",
	"Хостров",
	"долина Трёх ручьёв",
	"болотная опушка",
	"рынок у старого дуба",
	"летающий остров",
	"гавань отражений",
	"лужайка синих грибов",
	"Тихий утёс",
	"озеро Отзвуков",
	"поляна Стеклянных мух",
	"сад Колышущихся деревьев",
	"Ветряная переправа",
	"песчаный перевал",
	"северный маяк",
	"поляна Разорванных часов",
	"залив Туманной росы",
	"остров Слепых котов",
	"каньон Забытого имени",
	"Лес Кривых тропинок",
	"долина Светлых теней",
	"мост Семи ветров",
	"Площадь Тихих шагов",
	"башня Слёз и Соли",
	"горы Отражений",
	"ручей Памяти",
	"Овраг Смеющихся камней",
	"деревня Пыльных окон",
	"Роща Песчаных корней",
	"Туманное плато",
	"станция Зефир",
	"Кристальная шахта",
	"вулкан Мягкого пара",
	"Огненное ущелье",
	"озеро Двух лун",
	"Поле Сладкого дождя",
	"восточный архив Мистикорпа",
	"двор Сломанных антенн",
	"долина Разбитых фонарей",
	"мост через вечный ручей",
	"Солнечный овраг",
	"Гнездо парящих домов",
	"заброшенный обсерваторийный купол",
	"гавань Зеркальных китов",
	"лестница к облакам",
];


const situations = [
	"появились медведи",
	"начали расти светящиеся грибы",
	"внезапно пропал звук",
	"пошёл обратный дождь снизу вверх",
	"потемнело среди дня",
	"вода в ручье стала липкой",
	"ветер заговорил голосами друзей",
	"трава начала светиться ночью",
	"птицы перестали летать прямо",
	"все зеркала исчезли",
	"в небе появилась вторая луна",
	"все дороги поменялись местами",
	"камни начали петь",
	"грибы стали шевелиться",
	"всё вокруг стало пахнуть лимоном",
	"в лесу начали падать звёзды",
	"пчёлы построили дом из стекла",
	"солнце встало дважды",
	"на деревьях выросли замки",
	"туман стал радужным",
	"вода в озере закипела без причины",
	"все листья обернулись лицами",
	"ночь наступила посреди утра",
	"дождь стал сладким",
	"облака стали квадратными",
	"зазвенели все камни сразу",
	"земля стала мягкой как подушка",
	"река потекла в обратную сторону",
	"появился запах старых воспоминаний",
	"из-под земли вылетели светящиеся шары",
	"у теней появились голоса",
	"трава стала шептать имена",
	"все деревья повернулись в одну сторону",
	"ветер стал пахнуть молоком",
	"в небе появился гигантский чайник",
	"вода в колодце смеялась",
	"на ветвях выросли часы",
	"все грибы стали прозрачными",
	"в небе вспыхнул огненный круг",
	"по земле поползли отражения",
	"все животные забыли свои имена",
	"солнце исчезло, но стало светло",
	"все цветы закрылись одновременно",
	"из травы зазвучала музыка",
	"камни начали двигаться как улитки",
	"в озере появились новые звёзды",
	"в небе открылся глаз",
	"по небу поплыл огромный кит",
	"с ветвей посыпались крошечные ключи",
	"земля стала вибрировать как барабан",
	"появились невидимые стены",
	"по лесу прошёл фиолетовый туман",
	"все звуки стали тише",
	"в небе появилось слово «Привет»",
	"на дороге выросли грибы со свечами",
	"дождь начал идти изнутри домов",
	"камни начали рассказывать истории",
	"солнце стало квадратным",
	"все предметы начали подпрыгивать",
	"вода в реке стала густой как кисель",
	"трава зашептала песни",
	"птицы начали летать задом наперёд",
	"луна спустилась слишком низко",
	"тени стали двигаться отдельно от тел",
	"ветер стал приносить запах сна",
	"по полю пробежала огненная линия",
	"все деревья начали смеяться",
	"воздух стал плотным как желе",
	"все дома стали качаться в такт ветру",
	"в небе появился гигантский глаз",
	"по дороге поползла радуга",
	"все слова стали эхом",
	"в воздухе повисли пузырьки света",
	"вода в колодце запела",
	"солнце стало вращаться быстрее обычного",
	"луна сменила цвет на зелёный",
	"все следы на земле исчезли",
	"по ночам слышен звон чашек",
	"грибы начали мигать как фонари",
	"из земли поднялась лестница",
	"все животные уснули одновременно",
	"в лесу появился запах сахара",
	"появился шёпот из ниоткуда",
	"ветер стал шевелить воду против течения",
	"на небе появились нарисованные линии",
	"камни начали подпрыгивать как мячики",
	"река стала двигаться рывками",
	"все деревья опустили ветви до земли",
	"по холмам прокатился смех",
	"где-то рядом пролетел светящийся кит",
	"все ручьи заиграли музыку",
	"в небе открылась трещина",
	"по лесу пополз аромат свежего хлеба",
	"все птицы сложили крылья и слушали тишину",
	"солнце стало квадратным и пульсирующим",
	"дождь зашумел как аплодисменты",
	"на озере выросло облако",
	"все грибы начали шептать по одному слову",
	"луна упала в реку и расплылась кругами",
	"ветер обернулся мягким зверем",
];

const situationConsequences = [
	"маленьким зверям страшно",
	"никто не может уснуть",
	"местные жители прячутся по домам",
	"все дорожки перепутались",
	"пчёлы не могут найти свои ульи",
	"птицы перестали петь",
	"вода перестала отражать небо",
	"никто не может вспомнить вчерашний день",
	"травы растут прямо на крышах",
	"жители боятся выходить на улицу",
	"все разговоры звучат шёпотом",
	"в лесу стало слишком тихо",
	"никто не понимает, где север",
	"все окна покрылись инеем",
	"из колодцев слышен смех",
	"все кошки исчезли",
	"деревья начали двигаться ночью",
	"никто не может разжечь огонь",
	"звери перестали узнавать друзей",
	"все сны стали одинаковыми",
	"все фонари погасли одновременно",
	"жители перестали видеть свои отражения",
	"птицы начали падать в воздухе",
	"никто не может говорить громко",
	"все следы исчезают на глазах",
	"пчёлы начали строить соты на стенах домов",
	"все двери стали вести не туда",
	"дети не могут проснуться",
	"вода в реках стала сладкой",
	"все часы показывают разное время",
	"жители слышат шаги за спиной",
	"всё вокруг кажется чужим",
	"никто не может вспомнить своё имя",
	"все звуки стали громче обычного",
	"песок на тропинках начал шевелиться",
	"туман не рассеивается уже неделю",
	"все кошмары приходят днём",
	"листья шепчут незнакомые слова",
	"никто не может посчитать до трёх",
	"на небе больше нет звёзд",
	"все дома стали выше на один этаж",
	"из леса доносятся аплодисменты",
	"все чайники закипают без огня",
	"жители не могут закрыть глаза",
	"птицы строят гнёзда под землёй",
	"никто не чувствует холода",
	"все двери захлопываются сами",
	"трава светится даже днём",
	"никто не может найти дорогу домой",
	"все разговоры звучат наоборот",
	"вода в реках стала прозрачной до дна",
	"жители говорят только вопросами",
	"все лампы мигают в унисон",
	"никто не может вспомнить дорогу в Аморантикум",
	"все стены стали мягкими",
	"по ночам слышен смех из-под земли",
	"животные стоят неподвижно часами",
	"никто не может открыть глаза под дождём",
	"тени перестали двигаться",
	"все колокольчики звенят без ветра",
	"жители слышат музыку из земли",
	"деревья качаются без ветра",
	"все птицы улетели в бездну Ху",
	"вода пахнет грозой",
	"трава растёт прямо из камней",
	"жители перестали понимать время",
	"все окна отражают чужие места",
	"никто не может заснуть больше трёх минут",
	"дети начинают говорить как взрослые",
	"все рисунки на стенах ожили",
	"пчёлы поют вместо жужжания",
	"ветер приносит запах чужих городов",
	"все зеркала показывают закат",
	"никто не может вспомнить, что ел вчера",
	"все двери стали одинаковыми",
	"жители говорят голосом соседей",
	"все животные стали светиться",
	"все слова потеряли смысл",
	"никто не может найти обувь",
	"по утрам все просыпаются в другом доме",
	"птицы забыли, как летать",
	"никто не может выключить свет",
	"жители спорят с эхо",
	"все вещи стали петь",
	"никто не слышит собственные шаги",
	"все горшки с цветами исчезли",
	"вода стала отражать будущее",
	"никто не чувствует голода",
	"трава перестала расти",
	"все дороги ведут к одному дому",
	"жители говорят во сне одновременно",
	"ветер приносит чужие воспоминания",
	"все предметы стали мягкими",
	"никто не может остановить время",
	"все окна смотрят в одну сторону",
	"по ночам в домах звучат колыбельные",
	"все зеркала стали чёрными",
	"никто не может вспомнить, где живёт",
	"все птицы сидят на земле и слушают",
	"ветер поёт старую песню",
];

const creatures = [
	"древесный голем",
	"вепрь Ыш",
	"облачный кит",
	"песочный гигант",
	"пузырь с глазами",
	"грибной старец",
	"мохнатая лужа",
	"светлячный бык",
	"каменный карась",
	"туманная лягушка",
	"лужайничек хихикающий",
	"шепчущий улитень",
	"зеркальный олень",
	"фосфорный ёж",
	"песочный червяконосец",
	"кисельный лев",
	"вьючный слизень",
	"синяя саламандра дождя",
	"глинистый кот",
	"лунный крот",
	"неоновая сова",
	"плюшевый варан",
	"капельный ёж",
	"зверь с лицом камня",
	"жужжащий гриб",
	"мраморный осьминог",
	"медный голубь",
	"парящий кролик",
	"хрустальный ёжик",
	"пустотный филин",
	"шепчущий дубоход",
	"скользкий анемон",
	"огненный мотыль",
	"холодный карп",
	"световой барсук",
	"влажный пёсик ветра",
	"ржавый фенёк",
	"водяной оленёнок",
	"перламутровая змея",
	"пузатый медуняк",
	"моховой ворон",
	"губчатый медведь",
	"крошечный циклоп",
	"сонная ящерица",
	"искристый хорёк",
	"листяной паук",
	"янтарная стрекоза",
	"перепончатый ёж",
	"водяная совка",
	"поющий медуза",
	"глиняный хоробрус",
	"трёххвостый пёс",
	"пузырчатый жук",
	"искрящийся барс",
	"ночная каракатица",
	"шершавый бобр",
	"туманный олень",
	"стеклянный кабан",
	"железный филин",
	"лепестковый кот",
	"травяной черепах",
	"капельный лев",
	"грибная нора",
	"спящий китёнок",
	"светящийся дятел",
	"гулкий хамелеон",
	"карликовый голем",
	"тёплый уж",
	"желеобразный волк",
	"медный ёжик",
	"пенный медведь",
	"искристая выдра",
	"сиропный ёж",
	"чернильная чайка",
	"слюдяной волк",
	"песочный кенгуру",
	"жужжащая рыба",
	"восковая сова",
	"корневой гном",
	"щебечущий улитень",
	"бурый жук-часовщик",
	"искрящаяся мышь",
	"стеклянная лисица",
	"жидкий тигр",
	"облачная каракатица",
	"меланхоличный лось",
	"пень-путешественник",
	"грозовой кролик",
	"эхолягушка",
	"кристаллический енот",
	"гибкий муравьед",
	"глиняная пчела",
	"гудящий кабанчик",
	"шестиногий попугай",
	"запутавшийся жираф",
	"солнечный клоп",
	"вибрирующий кузнечик",
	"белый мохонос",
	"отражённый воробей",
	"тряпичный пёс",
	"капельный филин",
];

const creatureProblems = [
	"потерялась шляпа",
	"сломался амулет",
	"забыл дорогу домой",
	"растаял его дом",
	"пропала любимая песня",
	"болит зуб",
	"застрял в земле",
	"потерял память",
	"не может заснуть",
	"забыл, кто он",
	"плачет из-за потерянного сна",
	"растерял все мысли",
	"сломал крыло",
	"выпала тень",
	"разбежались друзья",
	"застрял в луже времени",
	"ослеп от собственной радости",
	"потерял запах",
	"запутался в паутине из света",
	"растаял под луной",
	"утратил голос",
	"перестал видеть цветы",
	"случайно проглотил своё имя",
	"спутал зиму и лето",
	"перепутал свои ноги с корнями",
	"потерял отражение в воде",
	"забыл, зачем живёт",
	"задремал на сто лет",
	"сломал песочные часы внутри себя",
	"провалился в собственную нору",
	"вырос до размеров дома и не может двигаться",
	"покрылся инеем и боится растаять",
	"поймал чужую мысль и не может отпустить",
	"перепутал свои глаза местами",
	"сделался прозрачным и пугается этого",
	"забыл, как моргать",
	"застрял в огромной банке варенья",
	"потерял способность смеяться",
	"разучился ходить по земле",
	"спрятал сердце и не помнит где",
	"стал слишком лёгким и улетел",
	"растаял язык и не может говорить",
	"осыпался как пепел при каждом слове",
	"попал в петлю времени",
	"забыл, как дышать под дождём",
	"не узнаёт своих детей",
	"постарел за один день",
	"вырос хвост, который живёт своей жизнью",
	"разучился плавать в воздухе",
	"съел свой дневник и теперь помнит всё",
	"заплакал солью и засолил всю реку",
	"поймал простуду от тумана",
	"забыл запах мха",
	"перепутал день и ночь",
	"стал отражением другого существа",
	"упал с неба и не может подняться",
	"застрял в окне между мирами",
	"слышит только свои сны",
	"стал громким и боится себя",
	"перестал понимать язык зверей",
	"выросли крылья, но он боится летать",
	"забыл, что у него лапы",
	"поймал солнечный ожог от луны",
	"оброс корнями и не может уйти",
	"стал невидимым и грустит от одиночества",
	"потерял цвет кожи",
	"начал мерцать и тревожить птиц",
	"разучился открывать глаза",
	"влюбился в облако и не может его догнать",
	"переел света",
	"вырос новый голос и спорит со старым",
	"застрял в своей тени",
	"разбил любимую кружку",
	"нашёл чужое лицо и теперь не узнаёт себя",
	"стал холодным изнутри",
	"спрятал ухо и не слышит никого",
	"перестал чувствовать время",
	"перепутал свои мысли с дождём",
	"разучился стоять на земле",
	"заговорился с ветром и потерял речь",
	"ослеп от собственной доброты",
	"застрял в ветвях дерева",
	"расплескал воспоминания",
	"разбил своё гнездо",
	"перестал видеть сны",
	"потерял крылья во сне",
	"задумался и забыл моргать",
	"разучился смеяться",
	"вырос второй хвост",
	"разбил часы внутри себя",
	"поймал чужую грусть",
	"потерял запах дома",
	"стал слишком тяжёлым и ушёл под землю",
	"покрылся листьями",
	"перепутал друзей и врагов",
	"нашёл своё прошлое и испугался",
	"разучился плавать",
	"стал зеркальным и теперь ослеп от света",
	"потерял способность петь",
	"уснул на много лет",
	"стал камнем и хочет обратно",
	"забыл, как зовут его маму",
];

const victimsProblems = [
	"облачные жители не могут провести чайную церемонию",
	"жители не могут перейти через площадь",
	"никто не может развесить фонари",
	"дети не могут играть на площадке",
	"пчёлы не находят дорогу к ульям",
	"старики не могут вспомнить свои песни",
	"ученики не могут открыть школу ветра",
	"рыбаки не могут спустить лодки на воду",
	"птицы не могут найти путь домой",
	"жители не могут уснуть из-за звуков неба",
	"ни один кот не выходит гулять",
	"повара не могут разжечь огонь",
	"музыканты не слышат свои инструменты",
	"продавцы не могут открыть лавки",
	"все мосты стали слишком скользкими",
	"травники не могут собрать урожай",
	"фермеры не видят, где кончается поле",
	"дети не узнают своих родителей",
	"пчёлы строят соты на окнах домов",
	"птицы сбиваются в стаи и не двигаются",
	"жители не могут открыть двери",
	"все дорожные знаки повернулись в разные стороны",
	"рыбы забыли, как плавать",
	"туман застил глаза жителям",
	"все кошки забрались на крыши и не спускаются",
	"звери не могут найти еду",
	"старейшины не могут прочитать хроники",
	"все дома стали одинаковыми, и никто не знает, где живёт",
	"садовники не могут отличить растения",
	"мосты начали исчезать под ногами",
	"зеркала в домах показывают чужие лица",
	"жители не могут говорить громче шёпота",
	"рыбаки больше не видят реку",
	"все корзины с ягодами превратились в листья",
	"никто не может вспомнить, как выглядело солнце",
	"дети не различают день и ночь",
	"жители не узнают друг друга",
	"повара путают ингредиенты и создают живое тесто",
	"никто не может выключить светильники",
	"все ворота ведут в одно место",
	"птицы начали строить гнёзда в дымоходах",
	"жители перестали слышать собственные шаги",
	"все письма возвращаются обратно к отправителю",
	"никто не может найти кладбище звуков",
	"пчёлы стали воровать чай у Пупо",
	"жители боятся смотреть в небо",
	"дети рисуют только чёрным",
	"жители не могут проснуться",
	"все разговоры звучат задом наперёд",
	"никто не может открыть сундуки",
	"все книги стали белыми",
	"рыбаки ловят зеркальные отражения вместо рыбы",
	"жители не могут остановить музыку ветра",
	"никто не может закрыть глаза",
	"жители путают сны с реальностью",
	"все лестницы ведут вниз",
	"все свечи горят без огня",
	"никто не может поднять ведро с колодца",
	"жители забыли, как дышать под дождём",
	"все вещи стали прозрачными",
	"дети больше не могут смеяться",
	"жители не могут покинуть деревню",
	"никто не может вспомнить свои имена",
	"жители слышат только шорох ветра",
	"все звери боятся воды",
	"жители видят сны чужих людей",
	"никто не может зажечь фонари",
	"все угощения стали невидимыми",
	"жители не могут прочитать вывески",
	"никто не может дотянуться до неба",
	"пчёлы стали воровать сахар у Корешок",
	"жители не могут остановить время",
	"все лодки застряли в тумане",
	"никто не может найти свои дома",
	"жители говорят только шёпотом",
	"дети бегают по потолку и не знают, как слезть",
	"все часы идут назад",
	"жители не могут выйти из сна",
	"никто не слышит чужие шаги",
	"все корзины для хлеба улетели на облака",
	"жители забыли, как зажигать огонь",
	"никто не может найти дорогу в Аморантикум",
	"все окна смотрят в одно направление",
	"жители не могут разбудить солнце",
	"дети перестали видеть цвета",
	"никто не может прочитать старые письма",
	"жители не узнают свой язык",
	"все животные говорят одновременно",
	"жители не могут понять свои отражения",
	"никто не может поймать дождь",
	"все птицы сели на землю и молчат",
	"жители путают свои тени",
	"никто не может найти путь к реке",
	"все дома начали меняться местами",
	"жители боятся спать",
	"дети рисуют летающих домов и те появляются наяву",
	"никто не может остановить рост травы",
	"жители не могут открыть ворота города",
	"все деревья разговаривают одновременно",
	"никто не может вспомнить, как выглядел свет",
	"жители видят в небе чужие сны",
];

const problemSources = [
	"реку перекрыл поезд",
	"мостик смыло туманом",
	"огромный корень перегородил дорогу",
	"над городом завис чайник размером с дом",
	"кто-то поменял местами все двери",
	"солнце заснуло посреди дня",
	"луна упала в озеро и не хочет всплывать",
	"ветер перестал дуть в привычную сторону",
	"река решила течь обратно",
	"гора внезапно начала расти",
	"все облака сели на землю",
	"огромный гриб перекрыл тропинку",
	"все мосты ушли под воду",
	"из колодца вылез гигантский червь",
	"старый дуб решил сменить место",
	"вода превратилась в кисель",
	"на дороге вырос каменный цветок",
	"все фонари стали танцевать",
	"дождь идёт только вверх",
	"все коты устроили собрание",
	"в небе застрял огромный воздушный пузырь",
	"ветер сдул половину деревни в холмы",
	"кто-то украл запах хлеба",
	"все звёзды упали на одну поляну",
	"на деревьях выросли зеркала",
	"земля стала мягкой как тесто",
	"по дороге прополз гигантский улитень",
	"кто-то перекрасил солнце в фиолетовый",
	"все часы пошли вразнобой",
	"все камни начали двигаться",
	"с неба падает свет без источника",
	"птицы решили не улетать",
	"облака запутались в горах",
	"из реки выходит пар и шепчет имена",
	"все окна домов повернулись внутрь",
	"кто-то нарисовал новую реку поверх старой",
	"трава начала расти на крышах",
	"все лестницы стали бесконечными",
	"в небе открылся круглый провал",
	"деревья начали медленно шагать к морю",
	"все зеркала показывают закат",
	"по небу проползла гигантская улитка",
	"все мосты превратились в струны",
	"пчёлы начали воровать свет",
	"вода в ручьях стала липкой",
	"луна отражается даже днём",
	"на тропинке вырос дом",
	"кто-то поменял местами все звуки",
	"все слова стали видимыми",
	"облака сплелись в узор и закрыли небо",
	"все грибы начали светить ярче солнца",
	"из-под земли вышел паровой кит",
	"все чайники начали кипеть без огня",
	"ветер потерял направление",
	"все письма стали пустыми",
	"кто-то выключил отражения в воде",
	"все деревья начали смеяться",
	"из тумана вышла гигантская нога",
	"все камни стали мягкими",
	"дождь стал пахнуть железом",
	"по горам прошёл светящийся поезд",
	"все птицы начали падать вниз",
	"в небе появилась дыра от солнца",
	"по дорогам поползли зеркала",
	"все колокольчики звенят одновременно",
	"огромная рыба застряла в реке",
	"ветер застрял в дымоходе",
	"все книги начали шептать",
	"по небу проплыл дом",
	"все мосты решили отдохнуть",
	"из облаков посыпались ключи",
	"луна стала петь",
	"все двери стали квадратными",
	"вода перестала течь",
	"трава выросла до облаков",
	"все птицы начали летать кругами",
	"из земли вылез гигантский гриб",
	"все огни поменялись местами с тенями",
	"все предметы стали зеркальными",
	"по небу проплыл чайник",
	"все звуки растворились в воздухе",
	"все дома стали качаться как лодки",
	"вода в колодцах исчезла",
	"на деревьях выросли лампы",
	"по небу пролетел бумажный корабль",
	"все дорожки стали петлять сами собой",
	"кто-то выключил день",
	"все птицы уснули на лету",
	"все окна домов распахнулись одновременно",
	"из леса доносится плач огромного существа",
	"все холмы начали пульсировать",
	"все мосты замерзли летом",
	"все звери говорят только загадками",
	"на реке образовалась пробка из льда",
	"из-под земли вырос стеклянный купол",
	"все шторы начали двигаться сами",
	"все люди забыли, что умеют ходить",
	"на поляне вырос огромный чайник",
	"все зеркала поменялись местами с окнами",
	"в небе загорелась надпись «тише»",
	"все камни начали подпрыгивать",
	"вода в реках стала золотой",
	"по горам прошёл фиолетовый шторм",
];

	// три типа основного действия
	const actionType = Math.floor(Math.random() * 3) + 1;
	const loc = pick(locations);

	let action: string;

	if (actionType === 1) {
		// локация — ситуация — проблема
		const situation = pick(situations);
		const consequence = pick(situationConsequences);
		action = `В локации ${loc} ${situation}, из-за чего ${consequence}.`;
	} else if (actionType === 2) {
		// локация — существо — его проблема
		const creature = pick(creatures);
		const cProblem = pick(creatureProblems);
		action = `В локации ${loc} у существа ${creature} проблема: ${cProblem}.`;
	} else {
		// локация — потерпевшие — источник проблемы
		const vProblem = pick(victimsProblems);
		const source = pick(problemSources);
		action = `В локации ${loc} проблема: ${vProblem}, из-за того что ${source}.`;
	}

	const result = `Завязка: ${intro}\n\nДействие: ${action}`;
	return result;
}
